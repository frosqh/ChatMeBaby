<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Chat jQuery</title>
    <link rel="stylesheet" href="chat.css"/>
  </head>

  <body>
   <fieldset>
     <legend>Un chat en jQuery</legend>
      <div id="conversation"></div><br />
      <form action="#" method="post">
        <input type="text" id="nom" value="pseudo" size="6">
        <input type="text" id="message" size="27">
        <button type="button" id="envoyer" title="Envoyer"><img src="envoyer-small.png"></button>
      </form>
    </fieldset>

    <script>
    $(function() {
      afficheConversation();

      $('#envoyer').click(function() {
          var nom = $('#nom').val();
          var message = $('#message').val();
          $.post('chat.php', {
              'nom': nom,
              'message': message
          }, afficheConversation);
      });

      function afficheConversation() {
        $('#conversation').load('ac.htm');
        $('#message').val('');
        $('#message').focus();
      }

      setInterval(afficheConversation, 4000);
    });
    </script>
  </body>
</html>
